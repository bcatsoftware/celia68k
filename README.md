# 事前作業

本作業は、フロッピーディスクへの書込みが伴います。何らかの手違いでフロッピーディスクの内容が破損してしまうのを防ぐため、フロッピーディスクのバックアップを作っておくことを推奨します。


パッチ作業を行う前に、「CELIAおかわりっ！」のフロッピーディスクに書込みプロテクトがされていた場合、書込み可能な状態にしてください。

メディア|書込みプロテクト|プロテクト解除手順
-|-|-
5.25インチ|書込み禁止シールの有無|シールを剥がす
3.5インチ|書込みプロテクトノッチの状態|ノッチを上にスライドする

# バグ修正パッチの適用方法

バグ修正パッチを行うには、２つの方法があります。


方法|パッチファイルの転送と実行|パッチ用ディスクの書き戻しと起動
:-:|:-:|:-:
必要なもの|RS-232Cクロスケーブル|フロッピディスクドライブ
対象者|中級者|上級者

---

# パッチファイルの転送と実行

## 手順 1: パッチファイルのダウンロード

下記ファイルをWindowsまたはMacOSXにパッチファイルをダウンロードします。

* [okawari_upd.r](https://github.com/bcatsoftware/celia68k/raw/master/patches/okawari_upd.r)


## 手順 2: パッチファイルをX68000に転送

下記サイトの「クロスケーブルで直結する」の内容にそって、ダウンロードしたファイルをX68000へ転送してください。

* http://retropc.net/x68000/data/exchange/

転送が終わりましたら、okawari_upd.rを「CELIAおかわりっ！」のフロッピーディスクにコピーしてください。

## 手順 3: パッチファイルの実行

パッチコマンドを実行すると、下記のように表示されます。

```
A>okawari_upd.r
X68k Bdif -= 実行型差分 =- v0.04 by K.Higashide

CELIA.X                17/05/05  5:29:04 -> CELIA.X           17/05/12  3:49:00
CELIASTG.DAT           17/05/05  5:18:20 -> CELIASTG.DAT      17/05/12  3:49:00

なお同名のファイルは上書きされます
アップデートしますか（y/[n]）
```

「y」キーを押し、続けて[ENTER]キーを押して下さい。

```
CELIA.X               : ... Completed.
CELIASTG.DAT          : .. Completed.

アップデートが終了しました。
```

上記メッセージが表示されましたら、パッチ作業は終了です。


---

# パッチ用ディスクの書き戻しと起動

## 手順1: ディスクイメージのダウンロード

下記ファイルをダウンロードします。

* [celia_okawari_patch.xdf](https://github.com/bcatsoftware/celia68k/raw/master/patches/celia_okawari_patch.xdf)

## 手順2: フロッピーディスクへの書き戻し

samdisk等のツールを用い、ディスクイメージファイル（celia_okawari_patch.xdf）をフロッピーディスクへ書き戻します。

## 手順3: フロッピーディスクの起動

X68000本体のドライブにフロッピーディスクを挿入し、起動します。
各ドライブには次のようにフロッピーディスクを挿入してください。

* ドライブ0: 書き戻したフロッピーディスク
* ドライブ1: CELIAおかわりっ！

## 手順4: パッチの実行

ドライブ0に挿入したフロッピーディスクが起動すると、次のように表示されます。

```
Human68k for X680x0 version 3.02
Copyright 1987,88,89,90,91,92,93 SHARP/Hudson

Command version 3.00

A> b:
B>a:okawari_upd.r
X68k Bdif -= 実行型差分 =- v0.04 by K.Higashide

CELIA.X                17/05/05  5:29:04 -> CELIA.X           17/05/12  3:49:00
CELIASTG.DAT           17/05/05  5:18:20 -> CELIASTG.DAT      17/05/12  3:49:00

なお同名のファイルは上書きされます
アップデートしますか（y/[n]）
```

「y」キーを押し、続いて「ENTER」キーを押して下さい。

次のように表示されたら、パッチ作業は完了です。

```
CELIA.X               : ... Completed.
CELIASTG.DAT          : .. Completed.

アップデートが終了しました。
```

作業が完了しましたら、作成したフロッピーディスクは不要となります。


---


# 免責事項

* 作業前に必ず「CELIAおかわりっ！」のバックアップを行って下さい
* このパッチは2017年5月5日に頒布された「CELIAおかわりっ！」のみサポートしております
* ディスクの内容を変更していた場合、パッチを適用できなくなります
* 本パッチによって生じたあらゆるトラブルに対し当方は一切の責務を負わないものとします
